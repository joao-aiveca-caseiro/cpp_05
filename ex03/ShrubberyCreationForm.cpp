/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ShrubberyCreationForm.cpp                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: jaiveca- <jaiveca-@student.42lisboa.com>   +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/07/30 17:52:38 by jaiveca-          #+#    #+#             */
/*   Updated: 2023/08/07 00:03:08 by jaiveca-         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "ShrubberyCreationForm.hpp"

ShrubberyCreationForm::ShrubberyCreationForm(): AForm("ShrubberyCreationForm", 145, 137){}

ShrubberyCreationForm::ShrubberyCreationForm(std::string target): AForm("ShrubberyCreationForm", 145, 137)
{
	this->_target = target;
}

ShrubberyCreationForm::ShrubberyCreationForm(const ShrubberyCreationForm &form): AForm(form)
{
	this->_target = form._target;
}

ShrubberyCreationForm	&ShrubberyCreationForm::operator=(const ShrubberyCreationForm &form)
{
	if (this != &form)
	{
		this->_target = form._target;	
	}
	return (*this);
}

ShrubberyCreationForm::~ShrubberyCreationForm(){}

std::string	ShrubberyCreationForm::getTarget() const
{
	return(this->_target);
}

void	ShrubberyCreationForm::execute(const Bureaucrat &executor) const
{
	if (this->getIsSigned())
	{
		if (executor.getGrade() <= this->getGradeToExecute())
		{
			std::ofstream outfile;
			
			outfile.open(this->getTarget().append("_shrubbery").c_str());                                                                      
			outfile <<                 		
 "										::     :++-:\n"                             
 "                                 ...=+**+:-==+*+++=-+=-::\n"                            
 "                               ..-++==+*#****##*******+--.\n"                          
 "                             :=++*+****+***++****##***+++*=.\n"                        
 "                        .:-==++******++****+++##*+**+++***+:::\n"                       
 "                       .+**********##*#####*+**#**++*+*##**++=.\n"                     
 "                       -*#*+**##*#+=########+**#**+********++++-:\n"                  
 "                 :.. .=+*#*+********#####*+#*#*#*-==****+*+++**+==--\n"                 
 "                -++: :*+*++=++****####%##**#*###+*#*+++++=-+****+*+=.\n"                
 "                -*+-.=++*+*#*##*##****+*##****##%###***==**#*:-+==-+=:\n"                
 "              :-.-=+++***##**+****####*****##*###%++*****##*=+=-*++**:\n"           
 "           ---=+=++*+++*###**+#*##*######******##*++##*****++-:-=+=+==----.\n"      
 "         .:-++#*****+*=-=-+=+*##*#*#*****#*****##***#****=-+++==*********+=...=-\n"    
 "       :++==****#*****==+=+**##%##%#**+*###**#*****######*=++******++=**==-.=+**+.\n"     
 "       =++++*****##*##*+*###*+*##%%%**.*######***##%#**#*****#**+****###*=-==**=:\n"     
 "       ..:=+**##+=-=***#*#%##+-+##%%##+##%%#*****####+##***#**++***######*====++:\n"   
 "         .--******++*--+***#*##*=#####**#%%#########+*********+++****+******=+=+==:\n" 
 "          -+-+*****=+*#****##%#=*###%%%##%##################**++****##***##**+==*+=-.\n"    
 "           :++*###**++#*####**##*###*%%*##*#**#%#######****+=*===#*=***##*#**++:..\n"   
 "         :=====+*##*#####*######*#+=+#%++######%%###****+****#*##**##**#****++=:-:.\n"  
 "    .-===++==+=.+***#######**#*********+=#%####%#***#*+*#%#**+*=+**#******:=+*++*=-.\n"    
 "  :--+*++=+==+=:==--=:=**#**#****+******+*##**#*+=*#*####****++#***+=+*+=------  .\n"       
 "  :=+*=-=*+===++*****+--++*****####**-****#*#**+-+##########***+=-**++++*+==+-=--.:-:\n"   
 "    ..-::-.-++++=-+*##*###***+*#*#%%##+#***##*+*+*++**++**+*+*=---+******+-=++=-=====.\n"   
 "       .-:++++-=-:-++-+##**++*#*+#%%#%%%#*###*###**###+=**+++=++*********+=:----=...\n"     
 "       -.-*=:=:+**++*++**#+-::=*+-:#*###**%#*+*****###*-=+*+++++***#*#***#*+***=\n"         
 "        .-*+*=+++**+++*++********+=+#%#%#%#*##*###%%##+=+*####*************+**=-\n"         
 "          :+==++*++*+=+==+*+*=+#####*#%%%%%#*###%###++**####**+*+=-=-=+**=:-.\n"            
 "             .-++******#*+*#*=--+=####%%%%%%##+::**+*+*#***++=++=-:=++-+=*+-:.\n"           
 "               .**+-=-=***##*+**+==+#*##%%%@*#-*#**+*##*+****++*+=+==+---=-::\n"            
 "                    .=+*++##*#####**+#*+*%%@%+:-+##+==:==++++====++:-:..:\n"                
 "                         :=+++=***+=::-+#@%%%*+=*=-.       : :=-+==*=.--\n"                 
 "                            . =--..      -@@@=..                   ::.\n"                   
 "                                          %%%\n"                                            
 "                                         .%%%.\n"                                           
 "                                         .%%%.\n"                                           
 "                                         :@%%.\n"                                           
 "                                         -%%%-\n"                                           
 "                                        .*###*:\n"                                          
 "                                        ...::::\n\n\n\n"
 "										::     :++-:\n"                             
 "                                 ...=+**+:-==+*+++=-+=-::\n"                            
 "                               ..-++==+*#****##*******+--.\n"                          
 "                             :=++*+****+***++****##***+++*=.\n"                        
 "                        .:-==++******++****+++##*+**+++***+:::\n"                       
 "                       .+**********##*#####*+**#**++*+*##**++=.\n"                     
 "                       -*#*+**##*#+=########+**#**+********++++-:\n"                  
 "                 :.. .=+*#*+********#####*+#*#*#*-==****+*+++**+==--\n"                 
 "                -++: :*+*++=++****####%##**#*###+*#*+++++=-+****+*+=.\n"                
 "                -*+-.=++*+*#*##*##****+*##****##%###***==**#*:-+==-+=:\n"                
 "              :-.-=+++***##**+****####*****##*###%++*****##*=+=-*++**:\n"           
 "           ---=+=++*+++*###**+#*##*######******##*++##*****++-:-=+=+==----.\n"      
 "         .:-++#*****+*=-=-+=+*##*#*#*****#*****##***#****=-+++==*********+=...=-\n"    
 "       :++==****#*****==+=+**##%##%#**+*###**#*****######*=++******++=**==-.=+**+.\n"     
 "       =++++*****##*##*+*###*+*##%%%**.*######***##%#**#*****#**+****###*=-==**=:\n"     
 "       ..:=+**##+=-=***#*#%##+-+##%%##+##%%#*****####+##***#**++***######*====++:\n"   
 "         .--******++*--+***#*##*=#####**#%%#########+*********+++****+******=+=+==:\n" 
 "          -+-+*****=+*#****##%#=*###%%%##%##################**++****##***##**+==*+=-.\n"    
 "           :++*###**++#*####**##*###*%%*##*#**#%#######****+=*===#*=***##*#**++:..\n"   
 "         :=====+*##*#####*######*#+=+#%++######%%###****+****#*##**##**#****++=:-:.\n"  
 "    .-===++==+=.+***#######**#*********+=#%####%#***#*+*#%#**+*=+**#******:=+*++*=-.\n"    
 "  :--+*++=+==+=:==--=:=**#**#****+******+*##**#*+=*#*####****++#***+=+*+=------  .\n"       
 "  :=+*=-=*+===++*****+--++*****####**-****#*#**+-+##########***+=-**++++*+==+-=--.:-:\n"   
 "    ..-::-.-++++=-+*##*###***+*#*#%%##+#***##*+*+*++**++**+*+*=---+******+-=++=-=====.\n"   
 "       .-:++++-=-:-++-+##**++*#*+#%%#%%%#*###*###**###+=**+++=++*********+=:----=...\n"     
 "       -.-*=:=:+**++*++**#+-::=*+-:#*###**%#*+*****###*-=+*+++++***#*#***#*+***=\n"         
 "        .-*+*=+++**+++*++********+=+#%#%#%#*##*###%%##+=+*####*************+**=-\n"         
 "          :+==++*++*+=+==+*+*=+#####*#%%%%%#*###%###++**####**+*+=-=-=+**=:-.\n"            
 "             .-++******#*+*#*=--+=####%%%%%%##+::**+*+*#***++=++=-:=++-+=*+-:.\n"           
 "               .**+-=-=***##*+**+==+#*##%%%@*#-*#**+*##*+****++*+=+==+---=-::\n"            
 "                    .=+*++##*#####**+#*+*%%@%+:-+##+==:==++++====++:-:..:\n"                
 "                         :=+++=***+=::-+#@%%%*+=*=-.       : :=-+==*=.--\n"                 
 "                            . =--..      -@@@=..                   ::.\n"                   
 "                                          %%%\n"                                            
 "                                         .%%%.\n"                                           
 "                                         .%%%.\n"                                           
 "                                         :@%%.\n"                                           
 "                                         -%%%-\n"                                           
 "                                        .*###*:\n"                                          
 "                                        ...::::\n";
			outfile.close();
			std::cout << "ðŸŒ³ Trees were planted on " << this->getTarget() << "! ðŸŒ³" << std::endl;
		}
		else
			throw(AForm::GradeTooLowException());	
	}
	else
		throw(AForm::UnsignedException());
}